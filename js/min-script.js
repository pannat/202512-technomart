var link=document.querySelector(".about-us__link-write-us"),popup=document.querySelector(".modal-write-us"),close=document.querySelector(".modal_close"),linkMap=document.querySelector(".about-us__map_link"),popupMap=document.querySelector(".modal-map"),linkCart=document.querySelectorAll(".catalog__link-buy"),popupAddCart=document.querySelector(".modal-add-cart");if(link&&popup&&close){var form=document.querySelector(".write-us__form"),author=document.querySelector(".write-us__input-name"),inputMail=document.querySelector(".write-us__input-email"),inputMessage=document.querySelector(".write-us__input-message"),storageAuthor=localStorage.getItem("author"),storageMail=localStorage.getItem("inputMail");link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal_show"),storageAuthor&&storageMail?(author.value=storageAuthor,inputMail.value=storageMail,inputMessage.focus()):author.focus()}),form.addEventListener("submit",function(e){author.value&&inputMail.value&&inputMessage.value?(localStorage.setItem("author",author.value),localStorage.setItem("inputMail",inputMail.value)):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal_show"),popup.classList.remove("modal-error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("modal_show")&&(popup.classList.remove("modal_show"),popup.classList.remove("modal-error"))})}if(linkMap&&popupMap){var closeMap=popupMap.querySelector(".modal_close");linkMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.add("modal_show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.remove("modal_show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupMap.classList.contains("modal_show")&&popupMap.classList.remove("modal_show")})}if(linkCart&&popupAddCart){for(var closeAddCart=popupAddCart.querySelector(".modal_close"),linkBack=popupAddCart.querySelector(".modal-add-cart__link-back"),i=0;i<linkCart.length;i++)linkCart[i].addEventListener("click",function(e){e.preventDefault(),popupAddCart.classList.add("modal_show")});closeAddCart.addEventListener("click",function(e){e.preventDefault(),popupAddCart.classList.remove("modal_show")}),linkBack.addEventListener("click",function(e){e.preventDefault(),popupAddCart.classList.remove("modal_show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupAddCart.classList.contains("modal_show")&&popupAddCart.classList.remove("modal_show")})}
